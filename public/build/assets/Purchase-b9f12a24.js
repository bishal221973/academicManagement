import{_ as U}from"./AppLayout-971202a1.js";import{d as g,K as I,y as v,q as P,o as _,e as f,b as p,T as q,L as B,c as $,z as j,u as r,t as y,w as C,a as s,i as F,k as M,v as N,F as Q}from"./app-91f7f415.js";import{_ as L}from"./Modal-dd194025.js";import{S as A,P as O,D as E}from"./AddStudent-b7b549a9.js";import{_ as T}from"./_plugin-vue_export-helper-c27b6911.js";import{B as z}from"./Breadcrumb-625ba3d5.js";import{T as K}from"./Table-100cf17c.js";/* empty css                                                                           *//* empty css                                                                *//* empty css                                                                    */import{A as W,_ as G}from"./AddProduct-7b5ba6b5.js";/* empty css                                                                   */import{A as H}from"./AddSupplier-103c74a3.js";/* empty css                                                                    */import"./printer-74c671e9.js";import"./ExportPrint-ce2f8d71.js";/* empty css                                                                    *//* empty css                                                              */import"./AddProductCategory-8e264e42.js";import"./AddUnit-6a6b5810.js";const J={class:"w-full border-[1px] border-gray-300 rounded-md flex px-3"},R={__name:"SelectProduct",props:{modelValue:[String,Number],categoryId:String},emits:["update:modelValue"],setup(u,{emit:d}){const l=u,c=d,e=g([]),n=async()=>{const a=await axios.get(route("product.get.all")+"?category_id="+(l==null?void 0:l.categoryId));e.value=a.data.products};I(()=>l==null?void 0:l.categoryId,()=>{n()}),v(()=>{n(),Pusher.logToConsole=!0;var a=new Pusher("09a7a9ef059d4f63aa24",{cluster:"ap2"});(a==null?void 0:a.subscribe("my-channel")).bind("product-event",()=>{n()})});const h=a=>a?a.map(t=>({label:(t==null?void 0:t.name)??(t==null?void 0:t.product),value:t.id})):[],b=P(()=>h(e.value));return(a,t)=>(_(),f("div",J,[p(A,{options:b.value,label:"Date Format *",placeholder:"Select Product",isForm:!0,"onUpdate:modelValue":t[0]||(t[0]=x=>c("update:modelValue",x)),modelValue:u.modelValue},null,8,["options","modelValue"]),p(W,{isSelect:!0})]))}},X={class:"w-full border-[1px] border-gray-300 rounded-md flex px-3"},Y={__name:"SelectSupplier",props:{modelValue:[String,Number],categoryId:String},emits:["update:modelValue"],setup(u,{emit:d}){const l=u,c=d,e=g([]),n=async()=>{const a=await axios.get(route("supplier.get.all"));e.value=a.data.suppliers};I(()=>l==null?void 0:l.categoryId,()=>{n()}),v(()=>{n(),Pusher.logToConsole=!0;var a=new Pusher("09a7a9ef059d4f63aa24",{cluster:"ap2"});(a==null?void 0:a.subscribe("my-channel")).bind("supplier-event",()=>{n()})});const h=a=>a?a.map(t=>({label:(t==null?void 0:t.name)??(t==null?void 0:t.product),value:t.id})):[],b=P(()=>h(e.value));return(a,t)=>(_(),f("div",X,[p(A,{options:b.value,label:"Date Format *",placeholder:"Select Supplier",isForm:!0,"onUpdate:modelValue":t[0]||(t[0]=x=>c("update:modelValue",x)),modelValue:u.modelValue},null,8,["options","modelValue"]),p(H,{isSelect:!0})]))}},Z={key:1},ee={class:"col-span-3"},te={class:"text-red-600"},se={class:"col-span-3"},ae={class:"text-red-600"},oe={class:"col-span-3"},re={class:"text-red-600"},le={class:"col-span-3"},ue={class:"text-red-600"},de={class:"col-span-3"},ce={class:"text-red-600"},ne={class:"col-span-12 mt-4 bg-gray-100 p-3 rounded flex justify-end"},pe={class:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",type:"submit"},ie={__name:"AddPurchase",props:{isSelect:{type:Boolean,default:!1},productPurchase:{type:Object,default:null},title:String,bill:Object},setup(u){var x,S,V,D;const d=u,l=g(!1),c=()=>{l.value=!l.value},e=q({product_category_id:"",product_id:((x=d.productPurchase)==null?void 0:x.product_id)??"",supplier_id:((S=d.productPurchase)==null?void 0:S.supplier_id)??"",purchase_date:((V=d.productPurchase)==null?void 0:V.purchase_date)??"",purchase_qty:((D=d.productPurchase)==null?void 0:D.purchase_qty)??""}),n=()=>{var i;(i=d.productPurchase)!=null&&i.id?b():h()},h=()=>{e.post(route("productPurchase.store"),{onSuccess:()=>{e.reset(),c()}})},b=()=>{e.put(route("productPurchase.update",d.productPurchase),{onSuccess:()=>{e.reset(),c()}})},a=g([]);v(()=>{var i;t(),(i=d.productPurchase)!=null&&i.id&&c()});const t=async()=>{const i=await B.get(route("tax.all"));a.value=i.data.taxes};return(i,o)=>{var w;return _(),f(Q,null,[u.isSelect?(_(),f("button",{key:0,onClick:c,class:"",type:"button"},[(_(),$(j(r(O))))])):(_(),f("div",Z,[u.title?(_(),f("button",{key:0,onClick:c,type:"button",class:"text-[14px] hover:text-main/80 flex items-center gap-3 mb-5"},y(u.title),1)):(_(),f("button",{key:1,onClick:c,type:"button",class:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700"},"Add Purchase"))])),p(L,{show:l.value,maxWidth:"sm",title:(w=u.productPurchase)!=null&&w.id?"Edit Purchase":"Add Purchase",onClose:c,selectedData:u.productPurchase},{default:C(()=>{var k;return[s("form",{onSubmit:F(n,["prevent"])},[s("div",ee,[o[5]||(o[5]=s("label",{class:"text-[14px]"},"Category *",-1)),p(G,{modelValue:r(e).product_category_id,"onUpdate:modelValue":o[0]||(o[0]=m=>r(e).product_category_id=m)},null,8,["modelValue"]),s("small",te,y(r(e).errors.product_category_id),1)]),s("div",se,[o[6]||(o[6]=s("label",{class:"text-[14px]"},"Product *",-1)),p(R,{modelValue:r(e).product_id,"onUpdate:modelValue":o[1]||(o[1]=m=>r(e).product_id=m),categoryId:r(e).product_category_id},null,8,["modelValue","categoryId"]),s("small",ae,y(r(e).errors.product_id),1)]),s("div",oe,[o[7]||(o[7]=s("label",{class:"text-[14px]"},"Supplier *",-1)),p(Y,{modelValue:r(e).supplier_id,"onUpdate:modelValue":o[2]||(o[2]=m=>r(e).supplier_id=m),categoryId:r(e).product_category_id},null,8,["modelValue","categoryId"]),s("small",re,y(r(e).errors.supplier_id),1)]),s("div",le,[o[8]||(o[8]=s("label",{class:"text-[14px]"},"Purchase Date",-1)),p(E,{modelValue:r(e).purchase_date,"onUpdate:modelValue":o[3]||(o[3]=m=>r(e).purchase_date=m)},null,8,["modelValue"]),s("small",ue,y(r(e).errors.email),1)]),s("div",de,[o[9]||(o[9]=s("label",{class:"text-[14px]"},"Quantity*",-1)),M(s("input",{type:"number",step:"0.01","onUpdate:modelValue":o[4]||(o[4]=m=>r(e).purchase_qty=m),class:"w-full border border-gray-300 rounded px-3 py-2 mt-1 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Purchase Qty"},null,512),[[N,r(e).purchase_qty]]),s("small",ce,y(r(e).errors.purchase_qty),1)]),s("div",ne,[s("button",pe,y((k=i.supplier)!=null&&k.id?"Update Supplier":"Save Supplier"),1)])],32)]}),_:1},8,["show","title","selectedData"])],64)}}},me=T(ie,[["__scopeId","data-v-9602fce5"]]);const _e={class:"flex items-center justify-between mb-3"},he={class:"flex w-full gap-3"},be={style:{width:"100%"}},ye={__name:"Purchase",props:{purchases:Object,supplier:Object},setup(u){const d=u,l=[{label:"S.N.",key:"sn"},{label:"Name",key:"name"},{label:"Purchase Date",key:"purchaseDate"},{label:"Supplier",key:"supplier"},{label:"Purchase Qty",key:"purchaseQty"}],c=P(()=>d.purchases.map((e,n)=>{var h,b;return{sn:n+1,name:(h=e==null?void 0:e.product)==null?void 0:h.product,purchaseDate:e==null?void 0:e.purchase_date,supplier:(b=e==null?void 0:e.supplier)==null?void 0:b.name,purchaseQty:e==null?void 0:e.purchase_qty,actions:e.id}}));return(e,n)=>(_(),$(U,null,{content:C(()=>[s("div",_e,[p(z,{breadcrumbs:[{label:"Inventory Management"},{label:"Purchase Products"}]}),p(me,{supplier:u.supplier},null,8,["supplier"])]),s("div",he,[s("div",be,[p(K,{columns:l,data:c.value,exportTitle:"Student List",filters:e.filters},null,8,["data","filters"])])])]),_:1}))}},Me=T(ye,[["__scopeId","data-v-d47e844f"]]);export{Me as default};
