import{_ as $}from"./AppLayout-971202a1.js";import{d as B,T as D,q as _,y as T,o as b,e as f,b as i,u as p,w as h,a as s,i as V,k as v,v as x,t as y,F as j,c as M}from"./app-91f7f415.js";import{_ as A}from"./Modal-dd194025.js";import{P as U,a as C}from"./AddStudent-b7b549a9.js";import{_ as E}from"./_plugin-vue_export-helper-c27b6911.js";import{B as N}from"./Breadcrumb-625ba3d5.js";import{T as O}from"./Table-100cf17c.js";import"./printer-74c671e9.js";import"./ExportPrint-ce2f8d71.js";/* empty css                                                                    *//* empty css                                                              */const P={class:"mb-3"},F={class:"mb-3"},q={class:"text-red-600"},I={class:"mb-3"},L={class:"flex justify-end bg-gray-100 p-3 rounded"},W={class:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700"},z={__name:"AddGroup",props:{isSelect:Boolean,group:Object,groups:Array},setup(a){const l=a,c=B(!1),n=()=>{c.value=!c.value},e=D({name:"",description:"",parent_id:null}),m=(o,t=null)=>o.filter(r=>r.parent_id===t).map(r=>({...r,children:m(o,r.id)})),g=(o,t=0,r=[])=>(o.forEach(d=>{var u;r.push({id:d.id,label:`${"â€” ".repeat(t)}${d.name}`}),(u=d.children)!=null&&u.length&&g(d.children,t+1,r)}),r),G=_(()=>m(l.groups));_(()=>g(G.value)),T(()=>{var o;(o=l.group)!=null&&o.id&&(n(),e.name=l.group.name,e.description=l.group.description,e.parent_id=l.group.parent_id)});const k=()=>{var o;(o=l.group)!=null&&o.id?S():w()},w=()=>{e.post(route("group.store"),{onSuccess:()=>{e.reset(),n()}})},S=()=>{e.put(route("group.update",l.group.id),{onSuccess:()=>{e.reset(),n()}})};return(o,t)=>{var r;return b(),f(j,null,[a.isSelect?(b(),f("button",{key:0,onClick:n},[i(p(U))])):(b(),f("button",{key:1,onClick:n,class:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700"}," Add Group ")),i(A,{show:c.value,maxWidth:"sm",title:(r=a.group)!=null&&r.id?"Edit Group":"Add Group",onClose:n},{default:h(()=>{var d;return[s("form",{onSubmit:V(k,["prevent"])},[s("div",P,[t[3]||(t[3]=s("label",{class:"text-sm"},"Parent Group",-1)),i(C,{modelValue:p(e).parent_id,"onUpdate:modelValue":t[0]||(t[0]=u=>p(e).parent_id=u),items:a.groups,placeholder:"Select parent group",class:"mt-2"},null,8,["modelValue","items"])]),s("div",F,[t[4]||(t[4]=s("label",{class:"text-sm"},"Group Name *",-1)),v(s("input",{"onUpdate:modelValue":t[1]||(t[1]=u=>p(e).name=u),class:"w-full border rounded px-3 py-2 mt-1",placeholder:"Enter group name"},null,512),[[x,p(e).name]]),s("small",q,y(p(e).errors.name),1)]),s("div",I,[t[5]||(t[5]=s("label",{class:"text-sm"},"Description",-1)),v(s("textarea",{"onUpdate:modelValue":t[2]||(t[2]=u=>p(e).description=u),class:"w-full border rounded px-3 py-2 mt-1"},null,512),[[x,p(e).description]])]),s("div",L,[s("button",W,y((d=a.group)!=null&&d.id?"Update Group":"Save Group"),1)])],32)]}),_:1},8,["show","title"])],64)}}};const H={class:"flex items-center justify-between mb-3"},J={class:"flex w-full gap-3"},K={style:{width:"100%"}},Q={__name:"Group",props:{settings:Object,groups:Object,group:Object},setup(a){const l=a,c=[{label:"S.N.",key:"sn"},{label:"Group",key:"group"},{label:"Parent Group",key:"parent"},{label:"Description",key:"description"},{label:"Status",key:"status"},{label:"Actions",key:"actions"}],n=_(()=>l.groups.map((e,m)=>{var g;return{sn:m+1,group:e==null?void 0:e.name,parent:(g=e==null?void 0:e.parent)==null?void 0:g.name,description:e==null?void 0:e.description,status:e==null?void 0:e.status,actions:e.id}}));return(e,m)=>(b(),M($,null,{content:h(()=>[s("div",H,[i(N,{breadcrumbs:[{label:"Group Management"}]}),i(z,{group:a.group,groups:a.groups},null,8,["group","groups"])]),s("div",J,[s("div",K,[i(O,{columns:c,data:n.value,exportTitle:"Student List",filters:e.filters,status:"group.update.status",edit:"group.edit",deleteUrl:"group.delete"},null,8,["data","filters"])])])]),_:1}))}},ne=E(Q,[["__scopeId","data-v-c2e4ed6a"]]);export{ne as default};
