import{_ as O}from"./AppLayout-971202a1.js";import{B as I}from"./Breadcrumb-625ba3d5.js";import"./AddStudent-b7b549a9.js";import"./Modal-dd194025.js";import{d as p,q as m,o as i,e as d,a as l,k as R,x as U,F as x,h as g,t as f,v as F,f as V,b,r as $,n as A,c as N,w as M}from"./app-91f7f415.js";/* empty css                                                                    *//* empty css                                                                        */import{_ as q}from"./_plugin-vue_export-helper-c27b6911.js";import{C as z,E as G,a as H,b as J,c as K}from"./ExportPrint-ce2f8d71.js";import"./printer-74c671e9.js";const Q={class:"w-full rounded-2xl bg-white backdrop-blur-md p-4 shadow-lg relative"},W={class:"mb-3 flex justify-between items-center flex-wrap gap-3"},X={class:"flex items-center gap-3"},Y={class:"flex"},Z=["value"],tt={class:"flex gap-2 flex-wrap items-center"},et=["onClick"],at={class:"flex items-center text-[11px]"},lt={class:"bg-white hover:bg-gray-50 border-b"},st={class:"px-3 py-2 text-sm text-gray-800"},nt={class:"px-3 py-2 text-sm text-gray-800"},rt={class:"px-3 py-2 text-sm text-gray-800"},ot={class:"px-3 py-2 text-sm text-gray-800"},ut={class:"px-3 py-2 text-sm text-gray-800"},it={class:"px-3 py-2 text-sm text-gray-800"},dt={class:"flex justify-between items-center"},ct={class:"text-[12px]"},ft={class:"mt-4 flex justify-center gap-2 items-center flex-wrap"},pt=["disabled"],xt=["onClick"],mt=["disabled"],bt={__name:"TableBill",props:{columns:{type:Array,required:!0},data:{type:Array,required:!0},edit:String,status:String,deleteUrl:String,exportTitle:String,payment:Object,filters:{type:Object,default:()=>({})},isInvoice:Boolean,hideActionOfID:String,canEdit:{type:Boolean,default:!0},canDelete:{type:Boolean,default:!0},canCreateSell:{type:Boolean,default:!0},isTrashed:{type:Boolean,default:!1},restoreUrl:{type:String,default:null},showSearch:{type:Boolean,default:!0},linkUrl:String,showUrl:String,addBook:String,addFunction:Function},setup(n){const o=n,y=p(""),c=p(1),u=p(50),k=[50,100,250,500,1e3],v=m(()=>{let a=o.data;if(y.value){const e=y.value.toLowerCase();a=a.filter(t=>Object.values(t).some(r=>String(r).toLowerCase().includes(e)))}if(Object.entries(o.filters).forEach(([e,t])=>{t&&e!=="date_from"&&e!=="date_to"&&e!=="payment_status"&&e!=="return_date_from"&&e!=="return_date_to"&&(a=a.filter(r=>{const s=String(r[e]??"").toLowerCase(),C=String(t).toLowerCase();return s.includes(C)}))}),o.filters.date_from){const e=new Date(o.filters.date_from);a=a.filter(t=>new Date(t.date)>=e)}if(o.filters.date_to){const e=new Date(o.filters.date_to);a=a.filter(t=>new Date(t.date)<=e)}if(o.filters.return_date_from){const e=new Date(o.filters.return_date_from);a=a.filter(t=>new Date(t.return_date)>=e)}if(o.filters.return_date_to){const e=new Date(o.filters.return_date_to);a=a.filter(t=>new Date(t.return_date)<=e)}return o.filters.payment_status&&(a=a.filter(e=>{const t=parseFloat(e.paid.replace("Rs.","").trim()),r=parseFloat(e.total.replace("Rs.","").trim());return o.filters.payment_status==="paid"?(console.log("Paid="+t),console.log("total="+r),t>0&&t>=r):o.filters.payment_status==="unpaid"?t===0:o.filters.payment_status==="partial"?t>0&&t<r:!0})),a}),S=m(()=>Math.ceil(v.value.length/u.value)||1),B=m(()=>{const a=(c.value-1)*u.value;return h==null?void 0:h.value.slice(a,a+u.value)}),L=m(()=>{let a=[];for(let e=1;e<=S.value;e++)a.push(e);return a}),D=a=>{a>=1&&a<=S.value&&(c.value=a)},P=()=>{c.value=1},j=m(()=>{if(!v.value.length)return"No entries found";const a=(c.value-1)*u.value+1,e=Math.min(c.value*u.value,v.value.length);return`Showing ${a} to ${e} of ${v.value.length} entries`}),_=p(null),w=p(null),T=p("asc"),h=m(()=>w.value?[...v.value].sort((a,e)=>{let t=a[w.value],r=e[w.value];return typeof t=="string"&&(t=t.toLowerCase()),typeof r=="string"&&(r=r.toLowerCase()),t<r?T.value==="asc"?-1:1:t>r?T.value==="asc"?1:-1:0}):v.value),E=a=>{w.value===a?T.value=T.value==="asc"?"desc":"asc":(w.value=a,T.value="asc")};return p({}),(a,e)=>(i(),d("div",Q,[l("div",W,[l("div",X,[l("div",Y,[R(l("select",{id:"paginationSelect","onUpdate:modelValue":e[0]||(e[0]=t=>u.value=t),onChange:P,class:"px-2 py-[3px] text-[13px] w-[60px] rounded border border-main/20"},[(i(),d(x,null,g(k,t=>l("option",{key:t,value:t},f(t),9,Z)),64))],544),[[U,u.value]])]),n.showSearch?R((i(),d("input",{key:0,"onUpdate:modelValue":e[1]||(e[1]=t=>y.value=t),onInput:e[2]||(e[2]=(...t)=>a.onSearch&&a.onSearch(...t)),type:"text",placeholder:"Search...",class:"px-4 py-1 text-[12px] rounded-xl shadow-inner border border-main/20 focus:outline-none focus:ring-1 focus:ring-[#9e0105] text-slate-900 w-50"},null,544)),[[F,y.value]]):V("",!0)]),l("div",tt,[b(z,{exportTitle:n.exportTitle,columns:n.columns,data:n.data},null,8,["exportTitle","columns","data"]),b(G,{exportTitle:n.exportTitle,columns:n.columns,data:n.data,tableRef:_.value},null,8,["exportTitle","columns","data","tableRef"]),b(H,{exportTitle:n.exportTitle,columns:n.columns,data:n.data,tableRef:_.value},null,8,["exportTitle","columns","data","tableRef"]),b(J,{exportTitle:n.exportTitle,columns:n.columns,data:n.data,tableRef:_.value},null,8,["exportTitle","columns","data","tableRef"]),b(K,{exportTitle:n.exportTitle,columns:n.columns,data:n.data,tableRef:_.value},null,8,["exportTitle","columns","data","tableRef"])])]),$(a.$slots,"default",{},void 0,!0),l("table",{ref_key:"tableRef",ref:_,class:"display stripe hover w-full"},[l("thead",null,[l("tr",null,[(i(!0),d(x,null,g(n.columns,t=>(i(),d("th",{class:"py-[9px] px-3 cursor-pointer select-none",key:t.key,onClick:r=>E(t.key)},[l("div",at,f(t.label),1)],8,et))),128))])]),l("tbody",null,[(i(!0),d(x,null,g(B.value,(t,r)=>(i(),d(x,{key:r},[l("tr",lt,[(i(!0),d(x,null,g(n.columns,s=>(i(),d("td",{key:s.key,class:"px-3 py-2 text-sm text-gray-800"},f(t[s.key]),1))),128))]),(i(!0),d(x,null,g(t.bills,(s,C)=>(i(),d("tr",{key:C,class:"bg-gray-50 text-xs text-gray-600"},[e[5]||(e[5]=l("td",{class:"px-3 py-2 text-sm text-gray-800"},"-",-1)),e[6]||(e[6]=l("td",{class:"px-3 py-2 text-sm text-gray-800"},"-",-1)),l("td",st,f(s==null?void 0:s.bill_no),1),l("td",nt,"Rs. "+f(s==null?void 0:s.sub_total),1),l("td",rt,"Rs. "+f(s==null?void 0:s.discount),1),l("td",ot,"Rs. "+f(s==null?void 0:s.total_tax),1),l("td",ut,"Rs. "+f(s==null?void 0:s.total_amount),1),e[7]||(e[7]=l("td",{class:"px-3 py-2 text-sm text-gray-800"},"Rs. 0",-1)),l("td",it,"Rs. "+f(s==null?void 0:s.total_amount),1)]))),128))],64))),128)),$(a.$slots,"customTr",{datas:B.value},void 0,!0)])],512),l("div",dt,[l("span",ct,f(j.value),1),l("div",ft,[l("button",{onClick:e[3]||(e[3]=t=>D(c.value-1)),disabled:c.value===1,class:"px-3 py-1 rounded-lg text-[12px] bg-[#D9A250] text-white disabled:bg-gray-300 transition"}," ‹ ",8,pt),(i(!0),d(x,null,g(L.value,t=>(i(),d("button",{key:t,onClick:r=>D(t),class:A(["px-3 py-1 rounded-lg transition text-[12px]",t===c.value?"bg-[#ef4444] text-white font-bold":"bg-gray-200 text-gray-700 hover:bg-gray-300"])},f(t),11,xt))),128)),l("button",{onClick:e[4]||(e[4]=t=>D(c.value+1)),disabled:c.value===S.value,class:"px-3 py-1 rounded-lg bg-[#ef4444] text-white text-[12px] disabled:bg-gray-300 transition"}," › ",8,mt)])])]))}},yt=q(bt,[["__scopeId","data-v-e4cac359"]]),vt={class:"flex items-center justify-between mb-3"},Rt={__name:"Billing",props:{students:Object},setup(n){const o=n,y=[{label:"S.N.",key:"sn"},{label:"Student",key:"student"},{label:"Bill ID",key:"billId"},{label:"Sub Total",key:"subTotal"},{label:"Discount",key:"discount"},{label:"Tax",key:"tax"},{label:"Total Payable",key:"payable"},{label:"Paid",key:"paid"},{label:"Balance",key:"balance"},{label:"Payment",key:"payment"}],c=m(()=>o.students.map((u,k)=>({sn:k+1,student:u==null?void 0:u.name,billId:"-",subTotal:"-",discount:"-",tax:"-",payable:"-",paid:"-",balance:"-",bills:u==null?void 0:u.bills})));return(u,k)=>(i(),N(O,{title:"Dashboard"},{content:M(()=>[l("div",vt,[b(I,{breadcrumbs:[{label:"Billing"}]})]),b(yt,{columns:y,data:c.value,exportTitle:"Student List",filters:u.filters,edit:"student.edit",deleteUrl:"student.delete"},null,8,["data","filters"])]),_:1}))}};export{Rt as default};
