import{q as v,o as s,e as o,a as n,n as O,S as Y,L as Q,U as C,d as g,k as A,x as G,F as f,h as V,t as m,v as H,f as b,b as $,r as F,c as w,w as R,u as U,p as _,g as J,T as K,Q as W}from"./app-91f7f415.js";import"./AddStudent-b7b549a9.js";import{_ as j}from"./_plugin-vue_export-helper-c27b6911.js";import{C as X,E as Z,a as ee,b as te,c as ae}from"./ExportPrint-ce2f8d71.js";import"./Modal-dd194025.js";/* empty css                                                              */const le=["checked"],se={__name:"Switch",props:{modelValue:{type:Boolean,default:!1},size:{type:String,default:"md"},onColor:{type:String,default:"#fff"},offColor:{type:String,default:"#ccc"},route:String},emits:["update:modelValue"],setup(l,{emit:r}){const y=l,c=r,d=v({get:()=>y.modelValue,set:p=>c("update:modelValue",p)}),L=async p=>{d.value=p.target.checked;const x=p.target.checked;d.value=x;try{await Q.put(y.route,{status:x}),C.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:k=>{k.onmouseenter=C.stopTimer,k.onmouseleave=C.resumeTimer}}).fire({icon:"success",title:"Status changed successfully !"})}catch(E){console.error("Failed to update status:",E),d.value=!x}},h=v(()=>{switch(y.size){case"sm":return"h-4 w-8";case"lg":return"h-8 w-16";default:return"h-6 w-12"}});return(p,x)=>(s(),o("label",{class:O(["switch",h.value]),style:Y({backgroundColor:d.value?l.onColor:l.offColor})},[n("input",{type:"checkbox",checked:d.value,onChange:L},null,40,le),x[0]||(x[0]=n("span",{class:"slider round"},null,-1))],6))}},ne=j(se,[["__scopeId","data-v-06f378a3"]]),oe={class:"w-full rounded-2xl bg-white backdrop-blur-md p-4 shadow-lg relative"},re={class:"mb-3 flex justify-between items-center flex-wrap gap-3"},ie={class:"flex items-center gap-3"},ue={class:"flex"},de=["value"],ce={class:"flex gap-2 flex-wrap items-center"},fe=["onClick"],me={class:"flex items-center text-[11px]"},pe={class:"block"},xe={class:"block"},ye={key:0,class:"text-green-600 font-semibold"},he={key:1,class:"text-red-600 font-semibold"},ve={class:"block"},ge=["src"],be={class:"block"},ke={class:"block"},we={key:0,class:"flex gap-2"},Ce={key:1},Se={key:0,class:"flex gap-2"},Te=["onClick"],Be=["onClick"],De={class:"flex justify-between items-center"},Ve={class:"text-[12px]"},$e={class:"mt-4 flex justify-center gap-2 items-center flex-wrap"},Re=["disabled"],Ue=["onClick"],_e=["disabled"],Ee={__name:"Table",props:{columns:{type:Array,required:!0},data:{type:Array,required:!0},edit:String,status:String,deleteUrl:String,exportTitle:String,payment:Object,filters:{type:Object,default:()=>({})},isInvoice:Boolean,hideActionOfID:String,canEdit:{type:Boolean,default:!0},canDelete:{type:Boolean,default:!0},canCreateSell:{type:Boolean,default:!0},isTrashed:{type:Boolean,default:!1},restoreUrl:{type:String,default:null},showSearch:{type:Boolean,default:!0},linkUrl:String,showUrl:String,addBook:String,addFunction:Function},setup(l){const r=l,y=g(""),c=g(1),d=g(50),L=[50,100,250,500,1e3],h=v(()=>{let a=r.data;if(y.value){const t=y.value.toLowerCase();a=a.filter(e=>Object.values(e).some(i=>String(i).toLowerCase().includes(t)))}if(Object.entries(r.filters).forEach(([t,e])=>{e&&t!=="date_from"&&t!=="date_to"&&t!=="payment_status"&&t!=="return_date_from"&&t!=="return_date_to"&&(a=a.filter(i=>{const u=String(i[t]??"").toLowerCase(),D=String(e).toLowerCase();return u.includes(D)}))}),r.filters.date_from){const t=new Date(r.filters.date_from);a=a.filter(e=>new Date(e.date)>=t)}if(r.filters.date_to){const t=new Date(r.filters.date_to);a=a.filter(e=>new Date(e.date)<=t)}if(r.filters.return_date_from){const t=new Date(r.filters.return_date_from);a=a.filter(e=>new Date(e.return_date)>=t)}if(r.filters.return_date_to){const t=new Date(r.filters.return_date_to);a=a.filter(e=>new Date(e.return_date)<=t)}return r.filters.payment_status&&(a=a.filter(t=>{const e=parseFloat(t.paid.replace("Rs.","").trim()),i=parseFloat(t.total.replace("Rs.","").trim());return r.filters.payment_status==="paid"?(console.log("Paid="+e),console.log("total="+i),e>0&&e>=i):r.filters.payment_status==="unpaid"?e===0:r.filters.payment_status==="partial"?e>0&&e<i:!0})),a}),p=v(()=>Math.ceil(h.value.length/d.value)||1),x=v(()=>{const a=(c.value-1)*d.value;return P==null?void 0:P.value.slice(a,a+d.value)}),E=v(()=>{let a=[];for(let t=1;t<=p.value;t++)a.push(t);return a}),k=a=>{a>=1&&a<=p.value&&(c.value=a)},I=()=>{c.value=1},z=v(()=>{if(!h.value.length)return"No entries found";const a=(c.value-1)*d.value+1,t=Math.min(c.value*d.value,h.value.length);return`Showing ${a} to ${t} of ${h.value.length} entries`}),N=async(a,t=!1)=>{(await C.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"})).isConfirmed&&K({}).delete(route(r==null?void 0:r.deleteUrl,a),{data:{permanent:t},onSuccess:()=>{var i,u;C.fire({toast:!0,position:"top-end",icon:"success",title:((u=(i=W())==null?void 0:i.props)==null?void 0:u.success)||"Deleted successfully!",showConfirmButton:!1,timer:1500,timerProgressBar:!0})},onError:()=>{C.fire({toast:!0,position:"top-end",icon:"error",title:"Failed to delete!",showConfirmButton:!1,timer:1500,timerProgressBar:!0})}})},S=g(null),T=g(null),B=g("asc"),P=v(()=>T.value?[...h.value].sort((a,t)=>{let e=a[T.value],i=t[T.value];return typeof e=="string"&&(e=e.toLowerCase()),typeof i=="string"&&(i=i.toLowerCase()),e<i?B.value==="asc"?-1:1:e>i?B.value==="asc"?1:-1:0}):h.value),M=a=>{T.value===a?B.value=B.value==="asc"?"desc":"asc":(T.value=a,B.value="asc")};g({});const q=()=>{r.addFunction()};return(a,t)=>(s(),o("div",oe,[n("div",re,[n("div",ie,[n("div",ue,[A(n("select",{id:"paginationSelect","onUpdate:modelValue":t[0]||(t[0]=e=>d.value=e),onChange:I,class:"px-2 py-[3px] text-[13px] w-[60px] rounded border border-main/20"},[(s(),o(f,null,V(L,e=>n("option",{key:e,value:e},m(e),9,de)),64))],544),[[G,d.value]])]),l.showSearch?A((s(),o("input",{key:0,"onUpdate:modelValue":t[1]||(t[1]=e=>y.value=e),onInput:t[2]||(t[2]=(...e)=>a.onSearch&&a.onSearch(...e)),type:"text",placeholder:"Search...",class:"px-4 py-1 text-[12px] rounded-xl shadow-inner border border-main/20 focus:outline-none focus:ring-1 focus:ring-[#9e0105] text-slate-900 w-50"},null,544)),[[H,y.value]]):b("",!0)]),n("div",ce,[$(X,{exportTitle:l.exportTitle,columns:l.columns,data:l.data},null,8,["exportTitle","columns","data"]),$(Z,{exportTitle:l.exportTitle,columns:l.columns,data:l.data,tableRef:S.value},null,8,["exportTitle","columns","data","tableRef"]),$(ee,{exportTitle:l.exportTitle,columns:l.columns,data:l.data,tableRef:S.value},null,8,["exportTitle","columns","data","tableRef"]),$(te,{exportTitle:l.exportTitle,columns:l.columns,data:l.data,tableRef:S.value},null,8,["exportTitle","columns","data","tableRef"]),$(ae,{exportTitle:l.exportTitle,columns:l.columns,data:l.data,tableRef:S.value},null,8,["exportTitle","columns","data","tableRef"])])]),F(a.$slots,"default",{},void 0,!0),n("table",{ref_key:"tableRef",ref:S,class:"display stripe hover w-full"},[n("thead",null,[n("tr",null,[(s(!0),o(f,null,V(l.columns,e=>(s(),o("th",{class:"py-[9px] px-3 cursor-pointer select-none",key:e.key,onClick:i=>M(e.key)},[n("div",me,m(e.label),1)],8,fe))),128))])]),n("tbody",null,[(s(!0),o(f,null,V(x.value,(e,i)=>(s(),o("tr",{key:i,class:O(e.is_returned==1?"line-through":"")},[(s(!0),o(f,null,V(l.columns,u=>(s(),o("td",{class:"py-[9px] px-3 cursor-pointer",key:u.key},[u.key==="status"?(s(),o(f,{key:0},[l.status?(s(),w(ne,{key:0,route:a.route(l.status,e.actions),modelValue:e.status,"onUpdate:modelValue":D=>e.status=D,onColor:"#fff",offColor:"#ccc"},null,8,["route","modelValue","onUpdate:modelValue"])):b("",!0)],64)):u.key==="student_name"?(s(),o(f,{key:1},[],64)):u.key==="link"?(s(),w(U(_),{key:2,href:l.linkUrl+"?expense="+e.link,class:"text-blue-800"},{default:R(()=>[n("span",pe,m(e.link),1)]),_:2},1032,["href"])):u.key==="view"?(s(),w(U(_),{key:3,href:e.url,class:"text-blue-800"},{default:R(()=>[n("span",xe,m(e.view),1)]),_:2},1032,["href"])):u.key==="boolean"?(s(),o(f,{key:4},[e.boolean?(s(),o("span",ye," Active ")):(s(),o("span",he," Inactive "))],64)):u.key==="show"?(s(),w(U(_),{key:5,href:a.route(l.showUrl,e.actions),class:"text-blue-800"},{default:R(()=>[n("span",ve,m(e.show),1)]),_:2},1032,["href"])):u.key==="image"?(s(),o("img",{key:6,src:"/storage/"+e.image,class:"h-[40px]",alt:""},null,8,ge)):u.key==="student_contact"?(s(),o(f,{key:7},[n("span",be,m(e.phone),1),n("small",ke,m(e.email),1)],64)):u.key==="actions"?(s(),o(f,{key:8},[l.isTrashed?(s(),o("div",we)):(s(),o("div",Ce,[e.is_returned!=1&&l.hideActionOfID!=e.actions?(s(),o("div",Se,[F(a.$slots,"invoice",{row:e},void 0,!0),l.payment&&l.canCreateSell?(s(),w(U(_),{key:0,href:a.route(l.payment)+"?student_id="+e.actions,class:"royal-payment-btn flex items-center gap-1 px-3 py-2 font-semibold text-white rounded-xl shadow-md transition-all duration-300"},{default:R(()=>[...t[5]||(t[5]=[n("i",{class:"fa fa-money-bill"},null,-1)])]),_:1},8,["href"])):b("",!0),l.edit&&l.canEdit?(s(),w(U(_),{key:1,href:a.route(l.edit,e[["actions"]]),class:"royal-edit-btn h-[25px] w-[30px] flex items-center gap-1 px-3 py-2 font-semibold text-white rounded-lg shadow-md transition-all duration-300"},{default:R(()=>[...t[6]||(t[6]=[n("i",{class:"fa fa-pen text-[10px]"},null,-1)])]),_:1},8,["href"])):b("",!0),l.deleteUrl&&l.canDelete?(s(),o("button",{key:2,onClick:D=>N(e[u.key]),class:"royal-delete-btn h-[25px] w-[30px] flex items-center gap-1 px-3 py-0 font-semibold text-white rounded-lg shadow-md transition-all duration-300"},[...t[7]||(t[7]=[n("i",{class:"fa fa-trash text-[10px]"},null,-1)])],8,Te)):b("",!0),l.addBook?(s(),o("button",{key:3,onClick:D=>q(e[u.key]),class:"royal-delete-btn h-[25px] w-[30px] flex items-center gap-1 px-3 py-0 font-semibold text-white rounded-lg shadow-md transition-all duration-300"},[...t[8]||(t[8]=[n("i",{class:"fa fa-plus text-[10px]"},null,-1)])],8,Be)):b("",!0)])):b("",!0)]))],64)):(s(),o(f,{key:9},[J(m(e[u.key]),1)],64))]))),128))],2))),128)),F(a.$slots,"customTr",{datas:x.value},void 0,!0)])],512),n("div",De,[n("span",Ve,m(z.value),1),n("div",$e,[n("button",{onClick:t[3]||(t[3]=e=>k(c.value-1)),disabled:c.value===1,class:"px-3 py-1 rounded-lg text-[12px] bg-[#D9A250] text-white disabled:bg-gray-300 transition"}," ‹ ",8,Re),(s(!0),o(f,null,V(E.value,e=>(s(),o("button",{key:e,onClick:i=>k(e),class:O(["px-3 py-1 rounded-lg transition text-[12px]",e===c.value?"bg-[#ef4444] text-white font-bold":"bg-gray-200 text-gray-700 hover:bg-gray-300"])},m(e),11,Ue))),128)),n("button",{onClick:t[4]||(t[4]=e=>k(c.value+1)),disabled:c.value===p.value,class:"px-3 py-1 rounded-lg bg-[#ef4444] text-white text-[12px] disabled:bg-gray-300 transition"}," › ",8,_e)])])]))}},Ie=j(Ee,[["__scopeId","data-v-3857a2a3"]]);export{Ie as T};
