import{d as w,T as B,x as F,L as O,o as u,e as i,c as C,A as U,u as t,t as c,b,w as S,a as e,i as V,k as m,v as f,z as j,F as I,q as M}from"./app-57419d0c.js";import{_ as $}from"./Modal-98fe17cf.js";/* empty css                                                                    */import{_ as P}from"./_plugin-vue_export-helper-c27b6911.js";import{P as R}from"./AddStudent-2b33b2a0.js";/* empty css                                                                   */import{B as E}from"./Breadcrumb-74eda663.js";import{T as q}from"./Table-df6073c3.js";import{_ as z}from"./AppLayout-8c26fc8d.js";import"./ExportPrint-1535eb17.js";/* empty css                                                                    *//* empty css                                                              */import"./printer-8ef20624.js";const W={key:1},G={class:"grid grid-cols-12 gap-3"},H={class:"col-span-12"},J={class:"text-red-600"},K={class:"col-span-4"},Q={class:"text-red-600"},X={class:"col-span-4"},Y={class:"text-red-600"},Z={class:"col-span-4"},ll={class:"text-red-600"},el={class:"col-span-12"},ol={class:"text-red-600"},tl={class:"col-span-12 mt-4 bg-gray-100 p-3 rounded flex justify-end"},al={class:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",type:"submit"},sl={__name:"AddCallLog",props:{isSelect:{type:Boolean,default:!1},callLog:{type:Object,default:null},title:String,bill:Object},setup(a){var x,y,_,L,k;const s=a,p=w(!1),n=()=>{p.value=!p.value},l=B({name:((x=s.callLog)==null?void 0:x.name)??"",phone:((y=s.callLog)==null?void 0:y.phone)??"",follow_up_date:((_=s.callLog)==null?void 0:_.follow_up_date)??"",call_type:((L=s.callLog)==null?void 0:L.call_type)??"Incomming Call",remarks:((k=s.callLog)==null?void 0:k.remarks)??""}),g=()=>{var d;(d=s.callLog)!=null&&d.id?N():D()},D=()=>{l.post(route("callLog.store"),{onSuccess:()=>{l.name="",l.phone="",l.follow_up_date="",l.call_type="Incomming Call",l.remarks="",n()}})},N=()=>{l.put(route("callLog.update",s.callLog),{onSuccess:()=>{l.name="",l.phone="",l.follow_up_date="",l.call_type="Incomming Call",l.remarks="",n()}})},T=w([]);F(()=>{var d;A(),(d=s.callLog)!=null&&d.id&&n()});const A=async()=>{const d=await O.get(route("tax.all"));T.value=d.data.taxes};return(d,o)=>{var v;return u(),i(I,null,[a.isSelect?(u(),i("button",{key:0,onClick:n,class:"",type:"button"},[(u(),C(U(t(R))))])):(u(),i("div",W,[a.title?(u(),i("button",{key:0,onClick:n,type:"button",class:"text-[14px] hover:text-main/80 flex items-center gap-3 mb-5"},c(a.title),1)):(u(),i("button",{key:1,onClick:n,type:"button",class:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700"},"Add Call Log"))])),b($,{show:p.value,maxWidth:"xl",title:(v=a.callLog)!=null&&v.id?"Edit callLog":"Add callLog",onClose:n,selectedData:a.callLog},{default:S(()=>{var h;return[e("form",{onSubmit:V(g,["prevent"])},[e("div",G,[e("div",H,[o[5]||(o[5]=e("label",{class:"text-[14px]"},"Full Name *",-1)),m(e("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=r=>t(l).name=r),class:"w-full border border-gray-300 rounded px-3 py-2 mt-1 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Full Name"},null,512),[[f,t(l).name]]),e("small",J,c(t(l).errors.name),1)]),e("div",K,[o[6]||(o[6]=e("label",{class:"text-[14px]"},"Phone *",-1)),m(e("input",{type:"text","onUpdate:modelValue":o[1]||(o[1]=r=>t(l).phone=r),class:"w-full border border-gray-300 rounded px-3 py-2 mt-1 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Phone number"},null,512),[[f,t(l).phone]]),e("small",Q,c(t(l).errors.phone),1)]),e("div",X,[o[7]||(o[7]=e("label",{class:"text-[14px]"},"Next Follow Date *",-1)),m(e("input",{type:"date","onUpdate:modelValue":o[2]||(o[2]=r=>t(l).follow_up_date=r),class:"w-full border border-gray-300 rounded px-3 py-2 mt-1 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Store Address"},null,512),[[f,t(l).follow_up_date]]),e("small",Y,c(t(l).errors.follow_up_date),1)]),e("div",Z,[o[9]||(o[9]=e("label",{class:"text-[14px]"},"Call Type*",-1)),m(e("select",{"onUpdate:modelValue":o[3]||(o[3]=r=>t(l).call_type=r),class:"w-full border border-gray-300 rounded px-3 py-2 mt-1 focus:outline-none focus:ring-2 focus:ring-blue-500"},[...o[8]||(o[8]=[e("option",{value:"Incomming Call"},"Incomming Call",-1),e("option",{value:"Outgoing Call"},"Outgoing Call",-1)])],512),[[j,t(l).call_type]]),e("small",ll,c(t(l).errors.in_time),1)]),e("div",el,[o[10]||(o[10]=e("label",{class:"text-[14px]"},"Remarks",-1)),m(e("textarea",{"onUpdate:modelValue":o[4]||(o[4]=r=>t(l).remarks=r),class:"w-full border border-gray-300 rounded px-3 py-2 mt-1 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Remarks"},`
                `,512),[[f,t(l).remarks]]),e("small",ol,c(t(l).errors.address),1)]),e("div",tl,[e("button",al,c((h=a.callLog)!=null&&h.id?"Update Call Log":"Save Call Log"),1)])])],32)]}),_:1},8,["show","title","selectedData"])],64)}}},nl=P(sl,[["__scopeId","data-v-a534bc17"]]),rl={class:"flex items-center justify-between mb-3"},dl={class:"flex w-full gap-3"},cl={style:{width:"100%"}},hl={__name:"CallLog",props:{callLogs:Object,callLog:Object},setup(a){const s=a,p=[{label:"S.N.",key:"sn"},{label:"Name",key:"name"},{label:"Phone",key:"phone"},{label:"Next Follow Date",key:"date"},{label:"Call Type",key:"type"},{label:"Remarks",key:"remarks"},{label:"Actions",key:"actions"}],n=M(()=>s.callLogs.map((l,g)=>({sn:g+1,name:l==null?void 0:l.name,phone:l==null?void 0:l.phone,date:l==null?void 0:l.follow_up_date,type:l==null?void 0:l.call_type,remarks:l==null?void 0:l.remarks,actions:l.id})));return(l,g)=>(u(),C(z,null,{content:S(()=>[e("div",rl,[b(E,{breadcrumbs:[{label:"Front Office"},{label:"Call Log"}]}),b(nl,{callLog:a.callLog},null,8,["callLog"])]),e("div",dl,[e("div",cl,[b(q,{columns:p,data:n.value,exportTitle:"Student List",filters:l.filters,edit:"callLog.edit",deleteUrl:"callLog.delete"},null,8,["data","filters"])])])]),_:1}))}};export{hl as default};
